{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/macbookpro/Documents/Tier-4/Advanced-React-master redux/sick-fits/frontend/components/UpdateProduct.js\";\nimport { useMutation, useQuery } from \"@apollo/client\";\nimport gql from \"graphql-tag\";\nimport Form from '../components/styles/Form';\nimport useForm from \"../lib/useForm\";\nimport DisplayError from './ErrorMessage';\nconst SINGLE_ITEM_QUERY = gql`\n    query SINGLE_ITEM_QUERY($id: ID!) {\n        Product (where: {\n            id: $id\n        }) \n        {\n            id\n            name\n            price\n            description\n            photo {\n                id\n                altText\n                image {\n                    publicUrlTransformed\n                }\n            }\n        }\n    }\n`;\nconst UPDATE_PRODUCT_MUTATION = gql`\n    mutation UPDATE_PRODUCT_MUTATION(\n        $id: ID!\n        $name: String\n        $description: String\n        $price: Int\n    ) {\n        updateProduct (\n            id: $id,\n            data: {\n                name: $name,\n                description: $description,\n                price: $price,\n            }\n        ) {\n            id\n            name\n            description\n            price\n        }\n    }\n`;\nexport default function UpdateProduct({\n  id\n}) {\n  //TODO\n  //get existing product\n  const {\n    data,\n    error,\n    loading\n  } = useQuery(SINGLE_ITEM_QUERY, {\n    variables: {\n      id\n    }\n  }); //mutation to update, including renaming res variables to not conflict with above\n\n  const [updateProduct, {\n    data: updateData,\n    error: updateError,\n    loading: updateLoading\n  }] = useMutation(UPDATE_PRODUCT_MUTATION); //create state for form inputs \n\n  const {\n    inputs,\n    handleChange,\n    clearForm,\n    resetForm\n  } = useForm(data === null || data === void 0 ? void 0 : data.Product); // console.log(inputs);\n\n  if (loading) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 25\n  }, this); //form to handle updates\n\n  return /*#__PURE__*/_jsxDEV(Form, {\n    onSubmit: async e => {\n      e.preventDefault();\n      const res = await updateProduct({\n        variables: {\n          id: id,\n          name: inputs.name,\n          price: inputs.price,\n          description: inputs.description\n        }\n      }).catch(console.error);\n      console.log({\n        res\n      }); //TODO handle submit\n      // // console.log({inputs});\n      // //submit input fields to backend\n      // const res = await createProduct();\n      // clearForm();\n      // //Go to the new product's page\n      // Router.push({\n      //     pathname: `/product/${res.data.createProduct.id}`,\n      // })\n    },\n    children: [/*#__PURE__*/_jsxDEV(DisplayError, {\n      error: error || updateError\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"fieldset\", {\n      disabled: updateLoading,\n      \"aria-busy\": updateLoading,\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"name\",\n        children: [\"Name It!\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          id: \"name\",\n          name: \"name\",\n          placeholder: \"Name\",\n          value: inputs.name,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"price\",\n        children: [\"Price It!\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          id: \"price\",\n          name: \"price\",\n          placeholder: \"Price\",\n          value: inputs.price,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"description\",\n        children: [\"Describe It!\", /*#__PURE__*/_jsxDEV(\"textarea\", {\n          id: \"description\",\n          name: \"description\",\n          placeholder: \"Description\",\n          value: inputs.description,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Bop It!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Update Product\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 9\n  }, this);\n}","map":{"version":3,"sources":["/Users/macbookpro/Documents/Tier-4/Advanced-React-master redux/sick-fits/frontend/components/UpdateProduct.js"],"names":["useMutation","useQuery","gql","Form","useForm","DisplayError","SINGLE_ITEM_QUERY","UPDATE_PRODUCT_MUTATION","UpdateProduct","id","data","error","loading","variables","updateProduct","updateData","updateError","updateLoading","inputs","handleChange","clearForm","resetForm","Product","e","preventDefault","res","name","price","description","catch","console","log"],"mappings":";;AAAA,SAASA,WAAT,EAAsBC,QAAtB,QAAsC,gBAAtC;AACA,OAAOC,GAAP,MAAgB,aAAhB;AACA,OAAOC,IAAP,MAAiB,2BAAjB;AACA,OAAOC,OAAP,MAAoB,gBAApB;AACA,OAAOC,YAAP,MAAyB,gBAAzB;AAEA,MAAMC,iBAAiB,GAAGJ,GAAI;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAnBA;AAqBA,MAAMK,uBAAuB,GAAGL,GAAI;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CArBA;AAwBA,eAAe,SAASM,aAAT,CAAuB;AAACC,EAAAA;AAAD,CAAvB,EAA6B;AAExC;AACA;AACA,QAAM;AAAEC,IAAAA,IAAF;AAAQC,IAAAA,KAAR;AAAeC,IAAAA;AAAf,MAA2BX,QAAQ,CAACK,iBAAD,EAAoB;AACzDO,IAAAA,SAAS,EAAE;AAACJ,MAAAA;AAAD;AAD8C,GAApB,CAAzC,CAJwC,CAQxC;;AACA,QAAM,CAACK,aAAD,EAAgB;AAClBJ,IAAAA,IAAI,EAAEK,UADY;AAElBJ,IAAAA,KAAK,EAAEK,WAFW;AAGlBJ,IAAAA,OAAO,EAAEK;AAHS,GAAhB,IAIFjB,WAAW,CAACO,uBAAD,CAJf,CATwC,CAcxC;;AACA,QAAM;AAAEW,IAAAA,MAAF;AAAUC,IAAAA,YAAV;AAAwBC,IAAAA,SAAxB;AAAmCC,IAAAA;AAAnC,MAAiDjB,OAAO,CAACM,IAAD,aAACA,IAAD,uBAACA,IAAI,CAAEY,OAAP,CAA9D,CAfwC,CAgBxC;;AAEA,MAAIV,OAAJ,EAAa,oBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAP,CAlB2B,CAoBxC;;AAEA,sBACI,QAAC,IAAD;AAAM,IAAA,QAAQ,EAAE,MAAOW,CAAP,IAAa;AACzBA,MAAAA,CAAC,CAACC,cAAF;AACA,YAAMC,GAAG,GAAG,MAAMX,aAAa,CAAC;AAC5BD,QAAAA,SAAS,EAAE;AACPJ,UAAAA,EAAE,EAAEA,EADG;AAEPiB,UAAAA,IAAI,EAAER,MAAM,CAACQ,IAFN;AAGPC,UAAAA,KAAK,EAAET,MAAM,CAACS,KAHP;AAIPC,UAAAA,WAAW,EAAEV,MAAM,CAACU;AAJb;AADiB,OAAD,CAAb,CAOfC,KAPe,CAOTC,OAAO,CAACnB,KAPC,CAAlB;AAQAmB,MAAAA,OAAO,CAACC,GAAR,CAAY;AAACN,QAAAA;AAAD,OAAZ,EAVyB,CAazB;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH,KAvBD;AAAA,4BAwBI,QAAC,YAAD;AAAc,MAAA,KAAK,EAAEd,KAAK,IAAIK;AAA9B;AAAA;AAAA;AAAA;AAAA,YAxBJ,eAyBI;AAAU,MAAA,QAAQ,EAAEC,aAApB;AAAmC,mBAAWA,aAA9C;AAAA,8BAEI;AAAO,QAAA,OAAO,EAAC,MAAf;AAAA,4CAEI;AACI,UAAA,IAAI,EAAC,MADT;AAEI,UAAA,EAAE,EAAC,MAFP;AAGI,UAAA,IAAI,EAAC,MAHT;AAII,UAAA,WAAW,EAAC,MAJhB;AAKI,UAAA,KAAK,EAAEC,MAAM,CAACQ,IALlB;AAMI,UAAA,QAAQ,EAAEP;AANd;AAAA;AAAA;AAAA;AAAA,gBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,cAFJ,eAaI;AAAO,QAAA,OAAO,EAAC,OAAf;AAAA,6CAEI;AACI,UAAA,IAAI,EAAC,QADT;AAEI,UAAA,EAAE,EAAC,OAFP;AAGI,UAAA,IAAI,EAAC,OAHT;AAII,UAAA,WAAW,EAAC,OAJhB;AAKI,UAAA,KAAK,EAAED,MAAM,CAACS,KALlB;AAMI,UAAA,QAAQ,EAAER;AANd;AAAA;AAAA;AAAA;AAAA,gBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,cAbJ,eAwBI;AAAO,QAAA,OAAO,EAAC,aAAf;AAAA,gDAEI;AACI,UAAA,EAAE,EAAC,aADP;AAEI,UAAA,IAAI,EAAC,aAFT;AAGI,UAAA,WAAW,EAAC,aAHhB;AAII,UAAA,KAAK,EAAED,MAAM,CAACU,WAJlB;AAKI,UAAA,QAAQ,EAAET;AALd;AAAA;AAAA;AAAA;AAAA,gBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,cAxBJ,eAkCI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAlCJ,eAqCI;AAAQ,QAAA,IAAI,EAAC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cArCJ;AAAA;AAAA;AAAA;AAAA;AAAA,YAzBJ;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ;AA4EH","sourcesContent":["import { useMutation, useQuery } from \"@apollo/client\";\nimport gql from \"graphql-tag\";\nimport Form from '../components/styles/Form';\nimport useForm from \"../lib/useForm\";\nimport DisplayError from './ErrorMessage';\n\nconst SINGLE_ITEM_QUERY = gql`\n    query SINGLE_ITEM_QUERY($id: ID!) {\n        Product (where: {\n            id: $id\n        }) \n        {\n            id\n            name\n            price\n            description\n            photo {\n                id\n                altText\n                image {\n                    publicUrlTransformed\n                }\n            }\n        }\n    }\n`;\n\nconst UPDATE_PRODUCT_MUTATION = gql`\n    mutation UPDATE_PRODUCT_MUTATION(\n        $id: ID!\n        $name: String\n        $description: String\n        $price: Int\n    ) {\n        updateProduct (\n            id: $id,\n            data: {\n                name: $name,\n                description: $description,\n                price: $price,\n            }\n        ) {\n            id\n            name\n            description\n            price\n        }\n    }\n`;\n \n\nexport default function UpdateProduct({id}) {\n\n    //TODO\n    //get existing product\n    const { data, error, loading } = useQuery(SINGLE_ITEM_QUERY, {\n        variables: {id},\n    });\n    \n    //mutation to update, including renaming res variables to not conflict with above\n    const [updateProduct, { \n        data: updateData, \n        error: updateError, \n        loading: updateLoading }] = \n        useMutation(UPDATE_PRODUCT_MUTATION);\n    //create state for form inputs \n    const { inputs, handleChange, clearForm, resetForm } = useForm(data?.Product);\n    // console.log(inputs);\n    \n    if (loading) return <p>Loading...</p>\n\n    //form to handle updates\n\n    return (\n        <Form onSubmit={async (e) => {\n            e.preventDefault();\n            const res = await updateProduct({\n                variables: {\n                    id: id,\n                    name: inputs.name,\n                    price: inputs.price,\n                    description: inputs.description,\n                },\n            }).catch(console.error);\n            console.log({res});\n            \n\n            //TODO handle submit\n\n            // // console.log({inputs});\n            // //submit input fields to backend\n            // const res = await createProduct();\n            // clearForm();\n            // //Go to the new product's page\n            // Router.push({\n            //     pathname: `/product/${res.data.createProduct.id}`,\n            // })\n        }}>\n            <DisplayError error={error || updateError} />\n            <fieldset disabled={updateLoading} aria-busy={updateLoading}>\n\n                <label htmlFor=\"name\">\n                    Name It!\n                    <input\n                        type=\"text\"\n                        id=\"name\"\n                        name=\"name\"\n                        placeholder=\"Name\"\n                        value={inputs.name}\n                        onChange={handleChange}\n                    />\n                </label>\n                <label htmlFor=\"price\">\n                    Price It!\n                    <input\n                        type=\"number\"\n                        id=\"price\"\n                        name=\"price\"\n                        placeholder=\"Price\"\n                        value={inputs.price}\n                        onChange={handleChange}\n                    />\n                </label>\n                <label htmlFor=\"description\">\n                    Describe It!\n                    <textarea\n                        id=\"description\"\n                        name=\"description\"\n                        placeholder=\"Description\"\n                        value={inputs.description}\n                        onChange={handleChange}\n                    />\n                </label>\n                <label>\n                    Bop It!\n                </label>\n                <button type=\"submit\">Update Product</button>\n            </fieldset>\n\n            {/* //EXAMPLE methods */}\n            {/* <button type='button' onClick={clearForm}>\n                Clear Form\n            </button>\n            <button type='button' onClick={resetForm}>\n                Reset Form\n            </button> */}\n\n        </Form>\n    )\n}"]},"metadata":{},"sourceType":"module"}